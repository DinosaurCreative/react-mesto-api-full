{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","href","target","defaultInfo","name","about","_id","avatar","CurrentUserContext","React","createContext","Card","card","onCardClick","_","onLikeClick","onTrashClick","user","useContext","alt","src","link","onClick","isOpen","owner","aria-label","likes","some","type","length","Main","props","currentUser","style","backgroundImage","onEditAvatar","onEditProfile","onAddPlace","cards","map","Footer","ImagePopup","onClose","PopupWithForm","title","onSubmit","children","buttonText","AddPlacePopup","useState","placeLink","setPlaceLink","placeName","setPlaceName","e","preventDefault","onUpdateCards","setTimeout","placeholder","onChange","value","id","minLength","maxLength","required","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","EditAvatarPopup","ref","useRef","onUpdateAvatar","current","api","address","token","this","_address","_token","item","ok","json","Promise","reject","status","fetch","method","headers","authorization","then","res","_checkServerResponse","data","body","JSON","stringify","catch","err","console","log","isLiked","reduceLike","increaseLike","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopups","getProfileData","userInfo","getImages","imagesData","Provider","i","changeLikeCardStatus","newCard","updatedCards","c","deleteImage","filter","postImage","splice","setNewProfileData","avatarLink","changeAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.618293dd.chunk.js","sourcesContent":["function Header() {\n  return (\n    <header className=\"header\">\n      <a href=\"#\" className=\"header__logo\" target=\"_self\" />\n    </header>\n  );\n}\n\nexport default Header;","import React from 'react';\n\nconst defaultInfo = {\n  name: '',\n  about: '',\n  _id: '',\n  avatar: ''\n}\n\nexport const CurrentUserContext = React.createContext(defaultInfo);","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction Card({card,_ ,onCardClick, onLikeClick, onTrashClick}) {\n\n  const user = React.useContext(CurrentUserContext);\n\n  function handleClick() {\n    card.isOpen = true;\n    onCardClick(card);\n  };\n\n  function handleLikeClick() {\n    onLikeClick(card);\n  };\n  \n  function handleTrashClick(){\n    onTrashClick(card)\n  };\n\n  function checkIsLiked(card) {\n    return card._id === user._id;\n  };\n\n  return (\n    <li className=\"grid__item\" >\n      <img className=\"grid__image\" alt={card.name}  src={card.link } onClick={handleClick}/>\n      <button className={`grid__delete-btn ${card.owner._id  === user._id ? \"grid__delete-btn_type_visible\" : ''}`} onClick={handleTrashClick}></button>\n      <div className=\"grid__city-box\">\n        <h2 className=\"grid__city-name\">{card.name}</h2>\n        <div className=\"grid__like-container\">\n          <button aria-label=\"Кнопка лайк\" className={`grid__like ${card.likes.some(checkIsLiked) ? 'grid__like_type_dark' : ''}`} type=\"button\" onClick={handleLikeClick}></button>\n          <p className=\"grid__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  );\n}\n\nexport default Card;","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Card from './Card';\n\n\nfunction Main (props) {  \n  let currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className='profile__photo' style={{backgroundImage: `url(${currentUser.avatar})`}}>\n          <span className={currentUser.avatar ? \"\" : \"profile__loader\"} />\n          <button className=\"profile__edit-avatar\" onClick={props.onEditAvatar}/>\n        </div>\n        <div className=\"profile__info-container\">\n          <div className=\"profile__info\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <p className=\"profile__occupation\" >{currentUser.about}</p>\n          </div>\n          <button className=\"profile__edit-button\" aria-label=\"Редактировать профиль\" type=\"button\" onClick={props.onEditProfile}/>\n        </div>\n        <button className=\"profile__add-button\" aria-label=\"Кнопка добавления фото\" type=\"button\" onClick={props.onAddPlace}/>\n\n      </section>\n      <section className=\"grid\">\n      <span className={ props.cards.length > 0  ? '': \"grid__loader\"}/>\n        <ul className=\"grid__list\">{ \n          props.cards.map(card => {\n            return (<Card card = {card}\n                         key = {card._id}\n                         onCardClick = {props.onCardClick}\n                         onLikeClick = {props.onLikeClick}\n                         onTrashClick = {props.onTrashClick}/>\n            )\n          })\n        }</ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;","function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyrights\">© 2021 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;","function ImagePopup({card, onClose}) {\n  return (\n    <div className={`popup popup_type_viewer ${card.isOpen ? \"popup_opened\" : ''}`}>\n      <div className=\"popup__photo-wrapper\">\n        <figure className=\"popup__photo-container\">\n          <img className=\"popup__image\" src={card.link} alt={card.name} />\n          <figcaption className=\"popup__image-title\">{card.name}</figcaption>\n        </figure>\n        <button className=\"popup__cross popup__cross_type_viewer\" aria-label=\"Закрыть окно\" type=\"button\"  onClick={onClose} />\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;","function PopupWithForm(props) {\n  return (\n    <div className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_opened': ''}`}>\n      <div className=\"popup__container\">\n        <h3 className=\"popup__title\">{props.title}</h3>\n        <form className={`popup__form popup__form_type_${props.name}`} name={`form-${props.name}`} onSubmit={props.onSubmit}>\n          {props.children}\n          <button className=\"popup__save-btn\" type=\"submit\">{props.buttonText}</button>\n        </form>\n        <button className={`popup__cross popup__cross_${props.name}`} aria-label=\"Закрыть без сохранения\" type=\"button\" onClick ={props.onClose}/>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const [placeLink, setPlaceLink] = React.useState('');\n  const [placeName, setPlaceName] = React.useState('');\n\n  function onSubmit(e) {\n    e.preventDefault();\n    props.onUpdateCards({\n      name: placeName,\n      link: placeLink,\n    });\n    setTimeout(()=> {\n      setPlaceLink('');\n      setPlaceName('');\n    }, 2000);\n  }\n\n  function handleLinkChange(e) {\n    setPlaceLink(e.target.value);\n  };\n\n  function handleNameChange(e) {\n    setPlaceName(e.target.value);\n  };\n\n  function onClose() {\n    props.onClose();\n    setPlaceLink('');\n    setPlaceName('');\n  }\n\n  return (\n    <PopupWithForm isOpen = {props.isOpen}\n                   onClose = {onClose}\n                   name = {'image'}\n                   title = {'Новое место'}\n                   onSubmit = {onSubmit}\n                   buttonText = {props.buttonText}\n                   >\n      <input type=\"text\" placeholder=\"Название\" onChange={handleNameChange} name=\"name\" value={placeName} id=\"popup-title\"  className=\"popup__input popup__input_type_image-title\" minLength={2} maxLength={30} required />\n      <span className=\"popup__input-error popup-title-error\" />\n      <input type=\"url\" placeholder=\"Ссылка на картинку\" onChange={handleLinkChange} name=\"link\" value={placeLink} id=\"popup-link\" className=\"popup__input popup__input_type_image-link\" required />\n      <span className=\"popup__input-error popup-link-error\" />\n    </PopupWithForm>\n  );\n};\n\nexport default AddPlacePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup (props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(()=>{\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  },[props.isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  };\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  };\n  \n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n  };\n\n  return (\n    <PopupWithForm isOpen = {props.isOpen}\n                   onClose = {props.onClose}\n                   name = {'edit'}\n                   title = {'Редактировать профиль'}\n                   onSubmit = {handleSubmit}\n                   buttonText = {props.buttonText}\n                   >\n      <input type=\"text\" placeholder=\"Имя\" name=\"name\" id=\"popup-name\" onChange={handleNameChange} value={name} className=\"popup__input popup__input_type_name\" minLength={2} maxLength={40} required />\n      <span className=\"popup__input-error popup-name-error\" />\n      <input type=\"text\" placeholder=\"Професиия\" name=\"about\" id=\"popup-occupation\" onChange={handleDescriptionChange} value={description} className=\"popup__input popup__input_type_occupation\" minLength={2} maxLength={200} required />\n      <span className=\"popup__input-error popup-occupation-error\" />\n    </PopupWithForm>       \n  );\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const ref = React.useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar(ref.current.value);\n  };\n\n  return (  \n    <PopupWithForm isOpen = {props.isOpen}\n                   onClose = {props.onClose}\n                   name = {'avatar'}\n                   title = {'Обновить аватар'}\n                   onSubmit = {handleSubmit}\n                   buttonText = {props.buttonText}\n                   >\n      <input type=\"url\" placeholder=\"Ссылка на аватар\" ref={ref} name=\"link\" id=\"popup-avatar-link\" className=\"popup__input popup__input_type_avatar-link\" required />\n      <span className=\"popup__input-error popup-avatar-link-error\" />    \n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;","export class Api {\n  constructor({address, token}) {\n    this._address = address;\n    this._token = token;\n  }\n  \n  _checkServerResponse(item) {\n    if(item.ok){\n      return item.json();\n    }else {\n      return Promise.reject(item.status)\n    }\n  }\n  \n    getProfileData() {\n      return fetch(`${this._address}users/me`, {\n        method: 'GET',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        }\n      })\n      .then(res => this._checkServerResponse(res))\n    }\n\n  getImages(){\n    return fetch(`${this._address}cards`,{\n      method: 'GET',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(res => this._checkServerResponse(res))\n  }\n\n\n  setNewProfileData(data) {\n   return fetch(`${this._address}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n    .then(res => this._checkServerResponse(res))\n  }\n\n  postImage(data) {\n    return fetch(`${this._address}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link,\n      })\n    })\n    .then(res => this._checkServerResponse(res))\n  }\n\n  deleteImage(id) {\n   return fetch(`${this._address}cards/${id}`, {\n      method: 'DELETE',\n      headers:{\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(res => this._checkServerResponse(res))\n    .catch(err => console.log(`Ошибка: ${err}`))\n  }\n\n  changeAvatar(link) {\n    return fetch(`${this._address}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: link\n      })\n    })\n    .then(res => this._checkServerResponse(res))\n  }\n  \n  increaseLike(id) {\n    return fetch(`${this._address}cards/likes/${id}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'applictaion/json'\n      }\n    })\n    .then(res => this._checkServerResponse(res))\n  }\n\n\n  reduceLike(id) {\n    return fetch(`${this._address}cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'applictaion/json'\n      }\n    })\n    .then(res => this._checkServerResponse(res))\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if(isLiked) {\n      return this.reduceLike(id)\n    }else{\n      return this.increaseLike(id)\n    }\n    \n  }\n}\n\nconst api = new Api({ address: 'https://nomoreparties.co/v1/cohort-24/', token: '1b42587b-1212-49d2-8dac-fba90d326288' });\n\nexport default api;\n","import React, { useEffect, useState } from 'react';\nimport '../index.css';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from './ImagePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport api from '../utils/api';\nimport { CurrentUserContext }  from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen,    setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen,  setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({isOpen: false});\n  const [currentUser, setCurrentUser] = React.useState({ name: '', about: '', _id: '', avatar: ''});\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(()=> {\n    api.getProfileData()\n    .then(userInfo => setCurrentUser(userInfo))\n    .catch(err => console.log(`Ошибка при получении данных профиля: ${err}`))\n  },[]);\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard({ isOpen: false });\n  };\n \n  function handleUpdateUser(userInfo) {\n    api.setNewProfileData(userInfo)\n    .then(res => setCurrentUser(res))\n    .then(() => closeAllPopups())\n    .catch(err => console.log(`Ошибка при обновлении данных профиля: ${err}`))\n  };\n\n  function handleUpdateAvatar(avatarLink) {\n    api.changeAvatar(avatarLink)\n    .then(res => setCurrentUser(res))\n    .then(() => closeAllPopups())\n    .catch(err => console.log(`Ошибка при обновлении аватара: ${err}`))\n  }\n\n  function handleAddPlaceSubmit(newCard) {\n    api.postImage(newCard)\n    .then(res => {\n      cards.splice(cards.length - 1);\n      setCards([res, ...cards])\n    })\n    .then(() => closeAllPopups())\n    .catch(err => console.log(`Ошибка при добавлении нового фото: ${err}`))\n  }\n\n  useEffect(() => {\n    api.getImages()\n    .then(imagesData =>  setCards(imagesData))\n    .catch(err => console.log(`Ошибка: ${err}`))\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked)\n    .then(newCard => {\n      const updatedCards = cards.map(c => c._id === card._id ? newCard : c);\n      setCards(updatedCards);\n    })\n    .catch(err => console.log(`Ошибка: ${err}`))\n  };\n\n  function handleCardDelete(card) {\n    api.deleteImage(card._id)\n    .then(() => {\n      const updatedCards = cards.filter(c => c._id !== card._id);\n      setCards(updatedCards);\n    })\n    .catch(err => console.log(`Ошибка при удалении фото: ${err}`))\n  };\n\n  function handleCardClick(data) {\n    setSelectedCard(data);\n  };\n  \n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  };\n  \n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  };\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  };\n\n  return (\n    <div className=\"page\">\n      <div className=\"page__container\">\n        <CurrentUserContext.Provider value = {currentUser}>\n          <Header />\n          <Main onEditProfile = {handleEditProfileClick}\n                onAddPlace = {handleAddPlaceClick}\n                onEditAvatar = {handleEditAvatarClick}\n                onCardClick = {handleCardClick}\n                cards = {cards}\n                onLikeClick = {handleCardLike}\n                onTrashClick = {handleCardDelete}\n\n                />     \n          <Footer />\n          <AddPlacePopup isOpen = {isAddPlacePopupOpen}\n                         onClose = {closeAllPopups}\n                         onUpdateCards = {handleAddPlaceSubmit}\n                         buttonText = {\"Сохранить\"}\n                         />\n          <EditProfilePopup isOpen = {isEditProfilePopupOpen}\n                            onClose = {closeAllPopups}\n                            onUpdateUser = {handleUpdateUser}\n                            buttonText = {\"Сохранить\"}\n                            />\n          {isEditAvatarPopupOpen && <EditAvatarPopup isOpen = {isEditAvatarPopupOpen}\n                           onClose = {closeAllPopups}\n                           onUpdateAvatar = {handleUpdateAvatar}\n                           buttonText = {\"Сохранить\"}\n                           />}\n          <ImagePopup card = {selectedCard}\n                      onClose = {closeAllPopups}\n                      />\n        </CurrentUserContext.Provider>\n      </div>\n    </div>  \n  );\n};\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}